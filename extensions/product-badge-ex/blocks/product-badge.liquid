
{% if block.settings.show_badge %}
  {% assign badge_type = product.metafields.badge_app.badge_type.value %}
  {% assign badge_position = block.settings.badge_position | default: 'top-left' %}
  
  {% if badge_type != blank %}
    <div class="product-badge product-badge--{{ badge_position }}">
      {% case badge_type %}
        {% when 'sale' %}
          <span class="badge badge--sale">üî• Sale</span>
        {% when 'new' %}
          <span class="badge badge--new">‚ú® New</span>
        {% when 'best_seller' %}
          <span class="badge badge--bestseller">‚≠ê Best Seller</span>
        {% when 'limited' %}
          <span class="badge badge--limited">‚ö° Limited Edition</span>
      {% endcase %}
    </div>
  {% endif %}
{% endif %}

<style>
  .product-badge {
    position: absolute;
    z-index: 10;
    pointer-events: none;
  }
  
  .product-badge--top-left {
    top: 10px;
    left: 10px;
  }
  
  .product-badge--top-right {
    top: 10px;
    right: 10px;
  }
  
  .product-badge--bottom-left {
    bottom: 10px;
    left: 10px;
  }
  
  .product-badge--bottom-right {
    bottom: 10px;
    right: 10px;
  }
  
  .badge {
    display: inline-block;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    text-transform: uppercase;
    color: white;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    backdrop-filter: blur(10px);
    animation: fadeInBounce 0.3s ease-out;
  }
  
  .badge--sale {
    background: linear-gradient(135deg, #dc2626, #ef4444);
  }
  
  .badge--new {
    background: linear-gradient(135deg, #16a34a, #22c55e);
  }
  
  .badge--bestseller {
    background: linear-gradient(135deg, #2563eb, #3b82f6);
  }
  
  .badge--limited {
    background: linear-gradient(135deg, #7c3aed, #8b5cf6);
  }
  
  @keyframes fadeInBounce {
    0% {
      opacity: 0;
      transform: scale(0.8) translateY(-10px);
    }
    50% {
      opacity: 1;
      transform: scale(1.05);
    }
    100% {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }
  
  /* Responsive adjustments */
  @media (max-width: 768px) {
    .badge {
      font-size: 10px;
      padding: 4px 8px;
    }
  }
</style>

{% schema %}
{
  "name": "Product Badge",
  "target": "section_group://product-information",
  "enabled_on": {
    "templates": ["product"]
  },
  "settings": [
    {
      "type": "checkbox",
      "id": "show_badge",
      "label": "Show Product Badge",
      "default": true
    },
    {
      "type": "select",
      "id": "badge_position",
      "label": "Badge Position",
      "default": "top-left",
      "options": [
        {"value": "top-left", "label": "Top Left"},
        {"value": "top-right", "label": "Top Right"},
        {"value": "bottom-left", "label": "Bottom Left"},
        {"value": "bottom-right", "label": "Bottom Right"}
      ]
    }
  ]
}
{% endschema %}
